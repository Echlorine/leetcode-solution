# 网络分层模型
## TCP/IP 四层模型
### 应用层
应用层交互的数据单元称为报文。
应用层协议：不同的网络应用需要不同的应用层协议。常见的应用层协议有HTTP 协议、SMTP 协议等。
### 传输层
传输层主要使用以下两种协议：
1. 传输控制协议 TCP
2. 用户数据协议 UDP
### 网络层

### 网络接口层

# HTTP 协议与HTTPS 协议
## HTTP 协议
### 介绍
HTTP 协议，全称超文本传输协议（Hypertext Transfer Protocol），是一个无状态（stateless）协议。

### 通信过程
1. 服务器在 80 端口等待客户的请求。
2. 浏览器发起到服务器的 TCP 连接（创建套接字 Socket）。
3. 服务器接收来自浏览器的 TCP 连接。
4. 浏览器（HTTP 客户端）与 Web 服务器（HTTP 服务器）交换 HTTP 消息。
5. 关闭 TCP 连接。

## HTTPS 协议
### 介绍
基于 HTTP协议，使用 TCP 作为底层协议，并额外使用 SSL/TLS 协议用作加密和安全认证。

### SSL/TLS 的工作原理
1. 对称加密：通信双方共享唯一密钥k，保密性依赖于密钥k的保密性。计算的代价相对较低。
2. 非对称加密：私钥仅由解密者保存，公钥由任何一个想与解密者通信的发送者（加密者）所知。计算的代价较高，效率太低。

### SSL/TLS 的工作流程
1. 使用**非对称加密**，对*对称加密*的密钥进行加密，保护该密钥不在网络信道中被窃听。
2. 之后的通信中，对信息进行**对称加密**，即可保证传输消息的保密性。

### 公钥传输的信赖性及解决办法
信赖性问题：中间人攻击
解决办法：证书颁发机构（CA，Certificate Authority）

当客户端（浏览器）向服务器发送 HTTPS 请求时，一定要先获取目标服务器的证书，并根据证书上的信息，检验证书的合法性。一旦客户端检测到证书非法，就会发生错误。客户端获取了服务器的证书后，由于证书的信任性是由第三方信赖机构认证的，而证书上又包含着服务器的公钥信息，客户端就可以放心的信任证书上的公钥就是目标服务器的公钥。

### 数字签名
作用：保证服务器上的CA证书不能被伪造。
具体流程：
1. CA 知道服务器的公钥，对该公钥采用散列技术生成一个摘要。CA 使用 CA 私钥对该摘要进行加密，并附在证书下方，发送给服务器。
2. 现在服务器将该证书发送给客户端，客户端需要验证该证书的身份。客户端找到第三方机构 CA，获知 CA 的公钥，并用 CA 公钥对证书的签名进行解密，获得了 CA 生成的摘要。
3. 客户端对证书数据（也就是服务器的公钥）做相同的散列处理，得到摘要，并将该摘要与之前从签名中解码出的摘要做对比，如果相同，则身份验证成功；否则验证失败。

# HTTP/x.x 个版本对比

# TCP协议
## 三次握手
三次握手：建立连接时用，**确认自己与对方的发送与接收是正常的**

## 四次挥手
四次挥手：关闭连接时用

## TCP协议如何保证有效传输
1. 应用数据被分割成 TCP 认为最适合发送的数据块。
2. TCP 给发送的每一个包进行编号，接收方对数据包进行排序，把有序数据传送给应用层。
3. 校验和
4. TCP 的接收端会丢弃重复的数据。
5. 流量控制
6. 拥塞控制
7. ARQ 协议
8. 超时重传

## 流量控制
## 拥塞控制
## ARQ 协议